import{g as d,a as m}from"./index.esm-8e3746c0.js";var y=function(r,e,o){if(r&&"reportValidity"in r){var t=d(o,e);r.setCustomValidity(t&&t.message||""),r.reportValidity()}},h=function(r,e){var o=function(u){var n=e.fields[u];n&&n.ref&&"reportValidity"in n.ref?y(n.ref,u,r):n.refs&&n.refs.forEach(function(a){return y(a,u,r)})};for(var t in e.fields)o(t)},g=function(r){return r instanceof Date},b=function(r){return r==null},j=function(r){return typeof r=="object"},V=function(r){return!b(r)&&!Array.isArray(r)&&j(r)&&!g(r)},A=function(r){return/^\w*$/.test(r)},v=function(r,e,o){for(var t=-1,u=A(e)?[e]:function(s){return l=s.replace(/["|']|\]/g,"").split(/\.|\[/),Array.isArray(l)?l.filter(Boolean):[];var l}(e),n=u.length,a=n-1;++t<n;){var c=u[t],f=o;if(t!==a){var i=r[c];f=V(i)||Array.isArray(i)?i:isNaN(+u[t+1])?{}:[]}r[c]=f,r=r[c]}return r},x=function(r,e){e.shouldUseNativeValidation&&h(r,e);var o={};for(var t in r){var u=d(e.fields,t),n=Object.assign(r[t]||{},{ref:u&&u.ref});if(N(e.names||Object.keys(r),t)){var a=Object.assign({},d(o,t));v(a,"root",n),v(o,t,a)}else v(o,t,n)}return o},N=function(r,e){return r.some(function(o){return o.startsWith(e+".")})};function O(r,e,o){return e===void 0&&(e={}),o===void 0&&(o={}),function(t,u,n){try{return Promise.resolve(function(a,c){try{var f=(e.context,Promise.resolve(r[o.mode==="sync"?"validateSync":"validate"](t,Object.assign({abortEarly:!1},e,{context:u}))).then(function(i){return n.shouldUseNativeValidation&&h({},n),{values:o.raw?t:i,errors:{}}}))}catch(i){return c(i)}return f&&f.then?f.then(void 0,c):f}(0,function(a){if(!a.inner)throw a;return{values:{},errors:x((c=a,f=!n.shouldUseNativeValidation&&n.criteriaMode==="all",(c.inner||[]).reduce(function(i,s){if(i[s.path]||(i[s.path]={message:s.message,type:s.type}),f){var l=i[s.path].types,p=l&&l[s.type];i[s.path]=m(s.path,f,i,s.type,p?[].concat(p,s.message):s.message)}return i},{})),n)};var c,f}))}catch(a){return Promise.reject(a)}}}export{O as o};
